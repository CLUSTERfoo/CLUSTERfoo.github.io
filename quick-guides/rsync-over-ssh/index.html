<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- test -->
    <meta charset="utf-8">
    <title>CLUSTERfoo! - Syncing with a Remote Server Using Rsync Over SSH</title>
    <link rel="stylesheet" href="/assets/style/style.css">
    <link href="atom.xml" type="application/atom+xml" rel="alternate" title="Atom Feed">
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.6.7">
    <!-- MathJax for displaying math -->
    <script type="text/javascript"
      src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <!-- START MathJax Settings -->
    <script>
      MathJax.Hub.Config({
        preRemoveClass: "mj",
      });
    </script>
    <!-- END MathJax Settings -->
    <!-- START Google Analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-33332254-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <!-- END Google Analytics -->
  </head>
  <body>
    <div id="everything">
      <div id="main">
        <header>
          <hgroup>
            <h1>CLUSTERfoo!</h1>
            <h2>Possibly the best blog on the topic of me.</h2>
          </hgroup>
        </header>
        <div id="content">
          
            <article>
  <h2>Syncing with a Remote Server Using Rsync Over SSH</h2>
  <!-- _. -->

<p>Rsync is a command-line utility for copying and syncing files. Rsync can be
used over ssh to sync files between remote servers. The basic command
for use over ssh is</p>

<pre><code>$ rsync [options] -e "ssh" source target
</code></pre>

<p>If you’ve set up private and public keys to secure your ssh connection, you must
specify the location of the identity key (also known as “private key”), which
is usually found in the <code>~/.ssh</code> directory:</p>

<pre><code>$ rsync [options] -e "ssh -i /home/user/.ssh/private_key_file"
</code></pre>

<p>I use rsync to deploy my blog. All of its contents are found <a href="http://github.com/clusterfoo/clusterfoo-dot-com">in the <code>output</code>
directory</a>, which I sync with
a small shared server at <a href="http://asmallorange.com">A Small Ornage</a>.</p>

<p>I use the following simple command:</p>

<pre><code>$ rsync -avh [-n] --progress --delete-after -e "ssh -i /home/username/.ssh/id_rsa" \
  output/ username@clusterfoo.com:/home/username/public_html/
</code></pre>

<ul>
<li>
<code>-a</code>: Archive mode. The most common option for syncing directories.</li>
  <li>
<code>-v</code>: Verbose mode.</li>
  <li>
<code>-h</code>: Human readable. Print numbers in human-readable formats.</li>
  <li>
<code>-n</code>: Dry run.</li>
  <li>
<code>--progress</code>: Show progress during transfer.</li>
  <li>
<code>--delete-after</code>: Sync new and updated files, and wait until transfer is
complete before deleting any superfluous files. This is important when deploying
a website, since otherwise a visitor might stumble upon missing pages.</li>
</ul><h3 id="always-dry-run-first">Always Dry-Run First!</h3>

<p>It’s easy to make mistakes with rsync. A simple typo like <code>dir</code> instead of
<code>dir/</code> can mean a world of difference (and a world of pain if you accidentally
<code>-rm</code> an entire directory!).</p>

<p>I always do a dry-run before I use an rsync command for the first time. The
dry-run option (<code>-n</code>) will show you the final output of the operation,
without actually running through it.</p>
</article>
<!-- AddThis Button BEGIN -->
<br>
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5370f3f5539223bc"></script>
<!-- AddThis Button END -->
<!-- START disqus copypasta: -->
<div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'clusterfoo'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<!-- END disqus copypasta -->

          
        </div>
      </div>
      <aside id="sidebar">
        <div id="sidebar-content">
  <!-- menu -->
  <h3>Browse:</h3>
  <nav id="main-menu">
    <ul>
      <li><a href="/" title="Homepage">Home</a>
      <li><a href="/all-articles">All Articles</a>
      <li><a href="/links">Check it Out!</a>
      <li><a href="http://github.com/clusterfoo" title="My code on github"
        target="_blank">My Github</a>
      <li><a href="/me/about" title="About Me">About Me</a>
      <li><a href="/contact" title="Contact Me">Contact Me</a>
    </ul>
  </nav>

  <h3>Subscribe:</h3>

  <p><a href="http://feeds.feedburner.com/Clusterfoo" title="Subscribe to my feed"
    rel="alternate" type="application/rss+xml"><img
      src="//feedburner.google.com/fb/images/pub/feed-icon32x32.png" alt=""
      style="border:0"/></a>
      <a href="http://feeds.feedburner.com/Clusterfoo"
        title="Subscribe to my feed" rel="alternate"
        type="application/rss+xml">Subscribe in a reader</a>

  <form style="padding:3px;" action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=Clusterfoo', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
    <p>Email newsletter:</p>
    <p><input type="text" style="width:140px" name="email"/></p>
    <input type="hidden" value="Clusterfoo" name="uri"/><input type="hidden" name="loc" value="en_US"/>
    <input type="submit" value="Subscribe" />
    <p>Delivered by <a href="https://feedburner.google.com" target="_blank">FeedBurner</a></p>
  </form>
</div>


      </aside>
      <footer>
        &copy; 2014 Noam Gagliardi Rabinovich
      </footer>
    </div>
  </body>
</html>
